<ModOps>
  
  <!-- fix the condition to display "build-Warning". -->
   
  
  <!-- https://github.com/jakobharder/anno1800-mod-loader/blob/main/doc/modloader11.md#patching-infotip-exportbin -->
    <!-- to export the tooltips from the game use FileDBReader and the FileFormat "infotip.xml" and unpack "data\infotips\export.bin" -->
    <!-- or download it in anno modding discord here: -->
    <!-- https://discord.com/channels/578443209940926465/1146098268850376816/1149910673678159964 -->

  <!-- guid 25000020 is responsilbe for tooltips when hovering over buildings in the build menu -->
  
  
  <!-- add the correct VisibilityElement at the correct location -->
  <!-- <ModOp Type="AddNextSibling" Path="//InfoTipData[Guid='25000020']//InfoElement/InfoElement[VisibilityElement/VisibilityElement[Condition='[Research IsGodlikePermit([ToolOneHelper BuildCost([RefGuid]) Costs AT(0) ProductGUID])]' and (not(ExpectedValueBool) or ExpectedValueBool='True')] and InfoElement[VisibilityElement/VisibilityElement[Condition='[BuildPermits BuildPermits([RefGuid])]' and CompareOperator/CompareOperator='3']]]/VisibilityElement/VisibilityElement[Condition='[Research IsGodlikePermit([ToolOneHelper BuildCost([RefGuid]) Costs AT(0) ProductGUID])]' and (not(ExpectedValueBool) or ExpectedValueBool='True')]"> -->
  <ModOp Type="merge" Path="//InfoTipData[Guid='25000020']//InfoElement/InfoElement[VisibilityElement/VisibilityElement[Condition='[Research IsGodlikePermit([ToolOneHelper BuildCost([RefGuid]) Costs AT(0) ProductGUID])]' and (not(ExpectedValueBool) or ExpectedValueBool='True')]]/InfoElement[VisibilityElement/VisibilityElement[Condition='[BuildPermits BuildPermits([RefGuid])]' and CompareOperator/CompareOperator='3']]/Text">
    <TextGUID>12662</TextGUID>
  </ModOp>
  
  <!-- remove the wrong InfoElement -->
  <ModOp Type="remove" Path="//InfoTipData[Guid='25000020']//InfoElement/InfoElement
      [VisibilityElement/VisibilityElement[Condition='[Research IsGodlikePermit([ToolOneHelper BuildCost([RefGuid]) Costs AT(0) ProductGUID])]' and (not(ExpectedValueBool) or ExpectedValueBool='True')] 
        and 
      InfoElement[VisibilityElement/VisibilityElement[Condition='[BuildPermits BuildPermits([RefGuid])]' and CompareOperator/CompareOperator='3']]]
    /InfoElement[Text/TextGUID='12662' and not(VisibilityElement/VisibilityElement)]" />
  

  <!-- #################################################### -->
  
  <!-- in vanilla it looks like this: -->
  
  <!-- <InfoElement> -->
    <!-- <ElementType>8</ElementType> -->
    <!-- <ChildCount>3</ChildCount> -->
    <!-- <VisibilityElement> -->
      <!-- <ElementType> -->
        <!-- <ElementType>2</ElementType> -->
      <!-- </ElementType> -->
      <!-- <ChildCount>1</ChildCount> -->
      <!-- <VisibilityElement> -->
        <!-- <ElementType> -->
          <!-- <ElementType>1</ElementType> -->
        <!-- </ElementType> -->
        <!-- <CompareOperator /> -->
        <!-- <ResultType /> -->
        <!-- <Condition>[Research IsGodlikePermit([ToolOneHelper BuildCost([RefGuid]) Costs AT(0) ProductGUID])]</Condition> -->
      <!-- </VisibilityElement> -->
      <!-- <OperatorType /> -->
    <!-- </VisibilityElement> -->
    <!-- <InfoElement> -->
      <!-- <ElementType>6</ElementType> -->
      <!-- <VisibilityElement> -->
        <!-- <ElementType> -->
          <!-- <ElementType>2</ElementType> -->
        <!-- </ElementType> -->
        <!-- <ChildCount>1</ChildCount> -->
        <!-- <VisibilityElement> -->
          <!-- <ElementType> -->
            <!-- <ElementType>1</ElementType> -->
          <!-- </ElementType> -->
          <!-- <CompareOperator> -->
            <!-- <CompareOperator>3</CompareOperator> -->
          <!-- </CompareOperator> -->
          <!-- <ResultType> -->
            <!-- <ResultType>1</ResultType> -->
          <!-- </ResultType> -->
          <!-- <Condition>[BuildPermits BuildPermits([RefGuid])]</Condition> -->
        <!-- </VisibilityElement> -->
        <!-- <OperatorType /> -->
      <!-- </VisibilityElement> -->
      <!-- <Text> -->
        <!-- <Style /> -->
      <!-- </Text> -->
    <!-- </InfoElement> -->
    <!-- <InfoElement> -->
      <!-- <ElementType>5</ElementType> -->
      <!-- <VisibilityElement> -->
        <!-- <ElementType> -->
          <!-- <ElementType>2</ElementType> -->
        <!-- </ElementType> -->
        <!-- <OperatorType /> -->
      <!-- </VisibilityElement> -->
      <!-- <Text> -->
        <!-- <TextGUID>12662</TextGUID> -->
        <!-- <Style /> -->
      <!-- </Text> -->
      <!-- <BackgroundType /> -->
    <!-- </InfoElement> -->
  
  <!-- but it should look like this (see also shipyard tooltip, there it is correct) -->
  
  <!-- <InfoElement> -->
    <!-- <ElementType>8</ElementType> -->
    <!-- <ChildCount>2</ChildCount> -->
    <!-- <VisibilityElement> -->
      <!-- <ElementType> -->
        <!-- <ElementType>2</ElementType> -->
      <!-- </ElementType> -->
      <!-- <ChildCount>1</ChildCount> -->
      <!-- <VisibilityElement> -->
        <!-- <ElementType> -->
          <!-- <ElementType>1</ElementType> -->
        <!-- </ElementType> -->
        <!-- <CompareOperator /> -->
        <!-- <ResultType /> -->
        <!-- <Condition>[Research IsGodlikePermit([ToolOneHelper BuildCost([RefGuid]) Costs AT(0) ProductGUID])]</Condition> -->
      <!-- </VisibilityElement> -->
      <!-- <OperatorType /> -->
    <!-- </VisibilityElement> -->
    <!-- <InfoElement> -->
      <!-- <ElementType>5</ElementType> -->
      <!-- <VisibilityElement> -->
        <!-- <ElementType> -->
          <!-- <ElementType>2</ElementType> -->
        <!-- </ElementType> -->
        <!-- <ChildCount>1</ChildCount> -->
        <!-- <VisibilityElement> -->
          <!-- <ElementType> -->
            <!-- <ElementType>1</ElementType> -->
          <!-- </ElementType> -->
          <!-- <CompareOperator> -->
            <!-- <CompareOperator>3</CompareOperator> -->
          <!-- </CompareOperator> -->
          <!-- <ResultType> -->
            <!-- <ResultType>1</ResultType> -->
          <!-- </ResultType> -->
          <!-- <Condition>[BuildPermits BuildPermits([RefGuid])]</Condition> -->
        <!-- </VisibilityElement> -->
        <!-- <OperatorType /> -->
      <!-- </VisibilityElement> -->
      <!-- <Text> -->
        <!-- <TextGUID>12662</TextGUID> -->
        <!-- <Style /> -->
      <!-- </Text> -->
      <!-- <BackgroundType /> -->
    <!-- </InfoElement> -->
  
</ModOps>








